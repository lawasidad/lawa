<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="UTF-8" />
  <title>Whatsapp Bulk Sender</title>
  <style>
    body { font-family: Arial; direction: rtl; text-align: right; padding: 20px; }
    #send { margin: 10px 0; }
    input[type="checkbox"] { transform: scale(1.3); margin-left: 5px; }
  </style>
</head>
<body>

<h3>ğŸ“© Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù¾Û•ÛŒØ§Ù… Ø¨Û† Ú˜Ù…Ø§Ø±Û•Ú©Ø§Ù† Ø¨Û• ÙˆÛ•ØªØ³Ø¦Ø§Ù¾</h3>

<textarea id="message" rows="4" cols="50" placeholder="Ù¾Û•ÛŒØ§Ù…Û•Ú©Û•Øª Ù„ÛØ±Û• Ø¨Ù†ÙˆØ³Û•..."></textarea><br>
<button id="send">ğŸ“¤ Ù†Ø§Ø±Ø¯Ù† Ø¨Û• ÙˆÛ•ØªØ³â€ŒØ¦Ø§Ù¾</button>
<br><br>

<label><input type="checkbox" id="selectAll"> Ù‡Û•Ù…ÙˆÙˆ Ú˜Ù…Ø§Ø±Û•Ú©Ø§Ù† Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•</label>
<ul id="phoneList"></ul>

<script>
fetch('phones.json')
  .then(response => response.json())
  .then(data => {
    const list = document.getElementById('phoneList');
    data.forEach((item, index) => {
      const li = document.createElement('li');
      li.innerHTML = `<input type="checkbox" class="phone" value="${item.phone}"> ${item.name} - ${item.phone}`;
      list.appendChild(li);
    });

    document.getElementById('selectAll').addEventListener('change', function () {
      document.querySelectorAll('.phone').forEach(cb => cb.checked = this.checked);
    });

    document.getElementById('send').addEventListener('click', () => {
      const message = encodeURIComponent(document.getElementById('message').value.trim());
      const selectedPhones = Array.from(document.querySelectorAll('.phone:checked')).map(cb => cb.value);
      if (!message || selectedPhones.length === 0) return alert("ØªÚ©Ø§ÛŒÛ• Ù¾Û•ÛŒØ§Ù… Ø¨Ù†ÙˆØ³Û• Ùˆ Ú˜Ù…Ø§Ø±Û• Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•");

      selectedPhones.forEach(phone => {
        const link = `https://wa.me/${phone}?text=${message}`;
        window.open(link, '_blank');
      });
    });
  })
  .catch(err => {
    console.error("Ù‡Û•ÚµÛ• Ù„Û• ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ phones.json:", err);
    alert("Ù†Û•ØªÙˆØ§Ù†Ø±Ø§ Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒÚ©Ø±Ø¯Ù† Ø¨Û• ÙØ§ÛŒÙ„Û•Ú©Û•. Ø¯ÚµÙ†ÛŒØ§Ø¨Û• Ù„Û•ÙˆÛ•ÛŒ Ø¨Û• Ú•ÛÛŒ Ø³ÛØ±Ú¤Û•Ø±Û•.");
  });
</script>

</body>
</html>
