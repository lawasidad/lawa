<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="UTF-8">
  <title>Whatsapp Bulk Sender</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    input, textarea, button {
      padding: 10px;
      margin: 10px 0;
      width: 100%;
      font-size: 16px;
    }
    .link {
      margin: 5px 0;
      padding: 10px;
      background: white;
      border: 1px solid #ccc;
    }
    .link a {
      color: green;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h2>ناردنی پەیام بۆ ژمارەکان لە واتس‌ئاپ</h2>

  <textarea id="message" rows="4" placeholder="پەیامەکەت بنوسە..."></textarea>
  <button onclick="loadAndGenerateLinks()">ناردنی پەیامەکە</button>

  <div id="output"></div>

  <script>
    function loadAndGenerateLinks() {
      const message = document.getElementById('message').value;
      const output = document.getElementById('output');
      output.innerHTML = "پەیامەکان دروستدەکرێن ...";

      fetch('phones.json')
        .then(res => res.json())
        .then(data => {
          output.innerHTML = '';
          data.forEach(phone => {
            const fullNumber = `+964${phone}`;
            const encodedMessage = encodeURIComponent(message);
            const waLink = `https://wa.me/${fullNumber}?text=${encodedMessage}`;

            const div = document.createElement('div');
            div.className = 'link';
            div.innerHTML = `<a href="${waLink}" target="_blank">${fullNumber}</a>`;
            output.appendChild(div);
          });
        })
        .catch(err => {
          output.innerHTML = 'کێشەیەک هەیە لە خوێندنەوەی phones.json';
          console.error(err);
        });
    }
  </script>
</body>
</html>
