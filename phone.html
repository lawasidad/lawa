<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="UTF-8" />
  <title>WhatsApp Message Sender</title>
  <style>
    body { font-family: Arial; direction: rtl; }
    .container { max-width: 600px; margin: auto; padding: 20px; }
    textarea { width: 100%; height: 80px; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: right; }
    th { background-color: #eee; }
    button { margin: 5px 0; padding: 8px 15px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù¾Û•ÛŒØ§Ù… Ø¨Û† ÙˆÛ•Ø³ÚµÛ•Ú©Ø§Ù†</h2>
    
    <textarea id="message" placeholder="Ù¾Û•ÛŒØ§Ù…Û•Ú©Û•Øª Ù„ÛŽØ±Û• Ø¨Ù†ÙˆØ³Û•..."></textarea><br>
    <button onclick="sendMessage()">ðŸ“¤ Ù†Ø§Ø±Ø¯Ù†ÛŒ Ù¾Û•ÛŒØ§Ù… Ø¨Û• WhatsApp</button>
    <button onclick="selectAll()">âœ… Ø¯ÛŒØ§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ù‡Û•Ù…ÙˆÙˆ</button>

    <table>
      <thead>
        <tr>
          <th><input type="checkbox" id="selectAllTop" onclick="toggleAll(this)"></th>
          <th>Ú˜Ù…Ø§Ø±Û• Ù…Û†Ø¨Ø§ÛŒÙ„</th>
        </tr>
      </thead>
      <tbody id="phoneList"></tbody>
    </table>
  </div>

  <script>
    async function loadPhones() {
      const response = await fetch("phones.json");
      const data = await response.json();
      const list = document.getElementById("phoneList");
      list.innerHTML = "";
      data.forEach((item, index) => {
        const row = `<tr>
          <td><input type="checkbox" class="phone-checkbox" value="${item.mobile}"></td>
          <td>${item.mobile}</td>
        </tr>`;
        list.innerHTML += row;
      });
    }

    function toggleAll(source) {
      const checkboxes = document.querySelectorAll(".phone-checkbox");
      checkboxes.forEach(cb => cb.checked = source.checked);
    }

    function selectAll() {
      const checkboxes = document.querySelectorAll(".phone-checkbox");
      checkboxes.forEach(cb => cb.checked = true);
      document.getElementById("selectAllTop").checked = true;
    }

    function sendMessage() {
      const message = encodeURIComponent(document.getElementById("message").value.trim());
      if (!message) {
        alert("ØªÚ©Ø§ÛŒÛ• Ù¾Û•ÛŒØ§Ù… Ø¨Ù†ÙˆØ³Û•");
        return;
      }
      const numbers = Array.from(document.querySelectorAll(".phone-checkbox:checked"))
        .map(cb => cb.value);
      if (numbers.length === 0) {
        alert("ØªÚ©Ø§ÛŒÛ• Ú˜Ù…Ø§Ø±Û• Ø¯ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•");
        return;
      }

      numbers.forEach(number => {
        const url = `https://wa.me/${number}?text=${message}`;
        window.open(url, '_blank');
      });
    }

    window.onload = loadPhones;
  </script>
</body>
</html>
