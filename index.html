<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="UTF-8">
  <title>داشبۆردی فرۆشتن</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f1f3f5;
      padding: 2rem;
    }
    .nav-tabs .nav-link.active {
      background-color: #0d6efd;
      color: white;
    }
    .tab-content {
      background: white;
      padding: 1.5rem;
      border: 1px solid #dee2e6;
      border-top: none;
      border-radius: 0 0 0.375rem 0.375rem;
    }
    .form-section {
      margin-bottom: 1rem;
    }
    .summary {
      font-weight: bold;
      color: #0d6efd;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2 class="text-center mb-4">📊 داشبۆردی فرۆشتن و راپۆرت</h2>

    <!-- Tabs Navigation -->
    <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales" type="button" role="tab">🧾 وەسل</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="report-tab" data-bs-toggle="tab" data-bs-target="#report" type="button" role="tab">📈 راپۆرت</button>
      </li>
    </ul>

    <!-- Tabs Content -->
    <div class="tab-content" id="dashboardContent">
      <!-- Sales Tab -->
      <div class="tab-pane fade show active" id="sales" role="tabpanel">
        <form id="saleForm">
          <div class="row form-section">
            <div class="col-md-3">
              <input type="text" class="form-control" placeholder="👤 ناوی کڕیار" id="customer" required>
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control" placeholder="📦 ناوی کاڵا" id="product" required>
            </div>
            <div class="col-md-2">
              <input type="number" class="form-control" placeholder="🔢 ژمارە" id="qty" min="1" value="1" required>
            </div>
            <div class="col-md-2">
              <input type="number" class="form-control" placeholder="💰 نرخی یەکە" id="unitPrice" min="0" required>
            </div>
            <div class="col-md-2">
              <input type="number" class="form-control" placeholder="🎯 داشکان %" id="discount" min="0" value="0">
            </div>
          </div>
          <button type="submit" class="btn btn-success">💾 پاشەکەوتکردن</button>
        </form>

        <hr>

        <h5>📋 وەسلەکان</h5>
        <table class="table table-bordered table-striped mt-3" id="receiptTable">
          <thead>
            <tr>
              <th>کڕیار</th>
              <th>کاڵا</th>
              <th>ژمارە</th>
              <th>نرخی یەکە</th>
              <th>داشکان</th>
              <th>کۆی گشتی</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Report Tab -->
      <div class="tab-pane fade" id="report" role="tabpanel">
        <h5>📊 راپۆرتی گشتی</h5>
        <p class="summary">🔢 ژمارەی کاڵا فرۆشراو: <span id="totalItems">0</span></p>
        <p class="summary">💰 کۆی گشتی پارە: <span id="totalRevenue">0</span> دینار</p>
      </div>
    </div>
  </div>

  <!-- Bootstrap & Script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const saleForm = document.getElementById('saleForm');
    const receiptTable = document.querySelector('#receiptTable tbody');
    const totalItemsEl = document.getElementById('totalItems');
    const totalRevenueEl = document.getElementById('totalRevenue');

    let totalItems = 0;
    let totalRevenue = 0;

    saleForm.addEventListener('submit', function (e) {
      e.preventDefault();

      const customer = document.getElementById('customer').value;
      const product = document.getElementById('product').value;
      const qty = parseFloat(document.getElementById('qty').value);
      const unitPrice = parseFloat(document.getElementById('unitPrice').value);
      const discount = parseFloat(document.getElementById('discount').value || 0);

      const total = qty * unitPrice * (1 - discount / 100);
      totalItems += qty;
      totalRevenue += total;

      // Update report
      totalItemsEl.textContent = totalItems;
      totalRevenueEl.textContent = totalRevenue.toFixed(2);

      // Add to table
      const row = `
        <tr>
          <td>${customer}</td>
          <td>${product}</td>
          <td>${qty}</td>
          <td>${unitPrice.toFixed(2)}</td>
          <td>${discount}%</td>
          <td>${total.toFixed(2)}</td>
        </tr>
      `;
      receiptTable.innerHTML += row;

      saleForm.reset();
      document.getElementById('qty').value = 1;
      document.getElementById('discount').value = 0;
    });
  </script>
</body>
</html>
